import{d as V,R as g,j as e,C,a as v,b as y,c as F,B as m,u as B}from"./index-C_eWIPTU.js";import{L as i,I as o,S as P,h as I,i as D,j as H,k as h,l as L,T as M,a as O,b as A,c as x,d as R,e as u,P as U,f as Z,g as $}from"./switch-B_-xAAB6.js";import{C as W}from"./clock-DqBZ_gNV.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=V("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=V("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),G=[{id:"1",name:"Monthly Claims Extract",layoutId:"layout-1",format:"CSV",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z",sftpConfig:{host:"sftp.vendor1.com",port:22,username:"vendor1",path:"/uploads/claims"},scheduleConfig:{frequency:"monthly",time:"02:00",daysOfMonth:[1],timezone:"America/Los_Angeles"},encryptionConfig:{enabled:!0,type:"PGP"}},{id:"2",name:"Weekly Eligibility Data",layoutId:"layout-2",format:"TSV",status:"active",createdAt:"2024-01-02T00:00:00Z",updatedAt:"2024-01-02T00:00:00Z",sftpConfig:{host:"sftp.vendor2.com",port:22,username:"vendor2",path:"/incoming"},scheduleConfig:{frequency:"weekly",time:"01:00",daysOfWeek:[1],timezone:"America/New_York"}},{id:"3",name:"Daily Provider Update",layoutId:"layout-3",format:"FIXED",status:"draft",createdAt:"2024-01-03T00:00:00Z",updatedAt:"2024-01-03T00:00:00Z"}],Y=[{id:"layout-1",name:"Claims Layout v1"},{id:"layout-2",name:"Eligibility Layout v2"},{id:"layout-3",name:"Provider Layout v1"}],J={host:"",port:22,username:"",path:""};function Q({onSubmit:r,onCancel:c,availableLayouts:j}){const[t,N]=g.useState(1),[a,S]=g.useState({status:"draft",format:"CSV"}),b=()=>{f()&&N(s=>s+1)},T=()=>{N(s=>s-1)},w=()=>{f()&&r(a)},f=()=>{switch(t){case 1:return a.name&&a.layoutId;case 2:return a.format;case 3:return!a.sftpConfig||a.sftpConfig.host&&a.sftpConfig.username&&a.sftpConfig.path;default:return!0}},l=s=>{S(n=>({...n,...s}))},d=(s,n)=>{if(a.sftpConfig){const k={...a.sftpConfig,[s]:n};l({sftpConfig:k})}},p=s=>{const n=parseInt(s.target.value),k=isNaN(n)?22:Math.max(1,Math.min(65535,n));d("port",k)},E=s=>{const n=s.target.value.trim();d("host",n)},q=s=>{const n=s.target.value.trim();d("username",n)},z=s=>{const n=s.target.value.trim();d("path",n)},K=s=>{const n=s.target.value.trim();d("knownHostKey",n)};return e.jsxs(C,{className:"w-full max-w-2xl mx-auto",children:[e.jsx(v,{children:e.jsx(y,{children:"Create New File Configuration"})}),e.jsx(F,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between mb-8",children:["Basic Info","File Format","SFTP Setup","Schedule"].map((s,n)=>e.jsxs("div",{className:`flex items-center ${n+1===t?"text-primary":"text-gray-400"}`,children:[e.jsx("div",{className:`
                  w-8 h-8 rounded-full flex items-center justify-center
                  ${n+1===t?"bg-primary text-white":"bg-gray-100"}
                `,children:n+1}),e.jsx("span",{className:"ml-2",children:s}),n<3&&e.jsx("div",{className:"w-16 h-px bg-gray-200 mx-2"})]},s))}),t===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"File Name"}),e.jsx(o,{id:"name",value:a.name||"",onChange:s=>l({name:s.target.value}),placeholder:"Enter file name"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"layout",children:"Select Layout"}),e.jsxs(P,{value:a.layoutId,onValueChange:s=>l({layoutId:s}),children:[e.jsx(I,{children:e.jsx(D,{placeholder:"Select a layout"})}),e.jsx(H,{children:j.map(s=>e.jsx(h,{value:s.id,children:s.name},s.id))})]})]})]}),t===2&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(i,{children:"File Format"}),e.jsxs(P,{value:a.format,onValueChange:s=>l({format:s}),children:[e.jsx(I,{children:e.jsx(D,{placeholder:"Select format"})}),e.jsxs(H,{children:[e.jsx(h,{value:"CSV",children:"CSV (Comma Separated)"}),e.jsx(h,{value:"TSV",children:"TSV (Tab Separated)"}),e.jsx(h,{value:"FIXED",children:"Fixed Length"})]})]})]})}),t===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{checked:!!a.sftpConfig,onCheckedChange:s=>l({sftpConfig:s?J:void 0})}),e.jsx(i,{children:"Enable SFTP Transfer"})]}),a.sftpConfig&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sftpHost",children:"SFTP Host"}),e.jsx(o,{id:"sftpHost",value:a.sftpConfig.host,onChange:E,placeholder:"sftp.example.com"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sftpPort",children:"Port"}),e.jsx(o,{id:"sftpPort",type:"number",min:1,max:65535,value:a.sftpConfig.port,onChange:p,placeholder:"22"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sftpUsername",children:"Username"}),e.jsx(o,{id:"sftpUsername",value:a.sftpConfig.username,onChange:q,placeholder:"username"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sftpPath",children:"Remote Path"}),e.jsx(o,{id:"sftpPath",value:a.sftpConfig.path,onChange:z,placeholder:"/uploads"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"knownHostKey",children:"Known Host Key (Optional)"}),e.jsx(o,{id:"knownHostKey",value:a.sftpConfig.knownHostKey,onChange:K,placeholder:"SSH host key"})]})]})]}),t===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{checked:!!a.scheduleConfig,onCheckedChange:s=>l({scheduleConfig:s?{frequency:"daily",time:"00:00",timezone:"UTC"}:void 0})}),e.jsx(i,{children:"Enable Scheduling"})]}),a.scheduleConfig&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(i,{children:"Frequency"}),e.jsxs(P,{value:a.scheduleConfig.frequency,onValueChange:s=>l({scheduleConfig:{...a.scheduleConfig,frequency:s}}),children:[e.jsx(I,{children:e.jsx(D,{})}),e.jsxs(H,{children:[e.jsx(h,{value:"daily",children:"Daily"}),e.jsx(h,{value:"weekly",children:"Weekly"}),e.jsx(h,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"scheduleTime",children:"Time"}),e.jsx(o,{id:"scheduleTime",type:"time",value:a.scheduleConfig.time,onChange:s=>l({scheduleConfig:{...a.scheduleConfig,time:s.target.value}})})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsxs(m,{variant:"outline",onClick:t===1?c:T,children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),t===1?"Cancel":"Back"]}),e.jsxs(m,{onClick:t===4?w:b,disabled:!f(),children:[t===4?"Create File":"Next",t!==4&&e.jsx(_,{className:"w-4 h-4 ml-2"})]})]})]})})]})}function ee({files:r,onEdit:c,onDelete:j}){return e.jsxs(C,{children:[e.jsx(v,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{children:"File Configurations"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(m,{variant:"outline",size:"sm",children:"Import"}),e.jsx(m,{variant:"outline",size:"sm",children:"Bulk Actions"})]})]})}),e.jsx(F,{children:e.jsxs(M,{children:[e.jsx(O,{children:e.jsxs(A,{children:[e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Layout"}),e.jsx(x,{children:"Format"}),e.jsx(x,{children:"Status"}),e.jsx(x,{children:"Schedule"}),e.jsx(x,{children:"Actions"})]})}),e.jsx(R,{children:r.map(t=>e.jsxs(A,{children:[e.jsx(u,{className:"font-medium",children:t.name}),e.jsx(u,{children:t.layoutId}),e.jsx(u,{children:t.format}),e.jsx(u,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="active"?"bg-green-100 text-green-800":t.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status})}),e.jsx(u,{children:t.scheduleConfig?e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{size:14,className:"mr-2"}),t.scheduleConfig.frequency]}):e.jsx("span",{className:"text-gray-500",children:"-"})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>c(t),children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>j(t),children:e.jsx(Z,{className:"h-4 w-4"})})]})})]},t.id))})]})})]})}function se({files:r}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(C,{children:[e.jsx(v,{className:"pb-2",children:e.jsx(y,{className:"text-sm font-medium",children:"Total Files"})}),e.jsx(F,{children:e.jsx("div",{className:"text-2xl font-bold",children:r.length})})]}),e.jsxs(C,{children:[e.jsx(v,{className:"pb-2",children:e.jsx(y,{className:"text-sm font-medium",children:"Active Files"})}),e.jsx(F,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(c=>c.status==="active").length})})]}),e.jsxs(C,{children:[e.jsx(v,{className:"pb-2",children:e.jsx(y,{className:"text-sm font-medium",children:"Scheduled Files"})}),e.jsx(F,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.filter(c=>c.scheduleConfig).length})})]})]})}function le(){const[r,c]=g.useState(G),[j,t]=g.useState(!1),[N,a]=g.useState(null),{toast:S}=B(),b=l=>{const d={...l,id:`file-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};c(p=>[...p,d]),t(!1),S({title:"File Created",description:"New file configuration has been created successfully."})},T=l=>{a(l),t(!0)},w=l=>{c(d=>d.filter(p=>p.id!==l.id)),S({title:"File Deleted",description:"File configuration has been deleted successfully.",variant:"destructive"})},f=()=>{t(!1),a(null)};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"File Manager"}),e.jsxs(m,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[e.jsx($,{size:16}),"New File Configuration"]})]}),e.jsx(se,{files:r}),e.jsx(ee,{files:r,onEdit:T,onDelete:w}),j&&e.jsx(Q,{onSubmit:b,onCancel:f,availableLayouts:Y})]})}export{Q as FileCreationForm,ee as FileList,le as FileManager,se as FileStats};
