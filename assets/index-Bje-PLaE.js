import{d as be,j as e,C as A,a as R,b as O,c as P,e as Ce,r as i,f as le,P as we,g as I,h as ae,D as Te,S as Se,i as Ne,k as Ee,l as ke,m as ce,n as Ae,B as E,o as Re,R as U,X as Oe,u as Pe}from"./index-C_eWIPTU.js";import{m as ie,A as Ie,C as Fe,n as Me,u as De,R as _e,T as Le,a as qe,b as re,c as F,d as ze,e as M,P as Ve,f as He,I as z,S as Y,h as X,i as K,j as J,k as V,l as oe,g as de}from"./switch-B_-xAAB6.js";import{C as Ue}from"./clock-DqBZ_gNV.js";import{u as Be,t as $e,D as We,b as Ge,c as Ye,d as Xe,e as Ke,F as Je,f as b,g as C,h as w,i as N,j as T,T as Qe,k as Ze,z as y}from"./textarea-BhKsh-6I.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=be("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),H=s=>{const r=new Date;return r.setDate(r.getDate()+s),r.toISOString()},p=s=>{const r=new Date;return r.setDate(r.getDate()-s),r.toISOString()},tt=[{id:"schedule-1",name:"Daily Claims Extract",description:"Daily extraction of claims data for vendor processing",fileId:"file-1",frequency:"daily",status:"active",time:"23:00",timezone:"America/Los_Angeles",lastRun:p(1),nextRun:H(1),createdAt:p(30),updatedAt:p(5),retryConfig:{maxAttempts:3,delayMinutes:15},notifyOnSuccess:!0,notifyOnFailure:!0,notificationEmails:["ops@company.com","claims@company.com"]},{id:"schedule-2",name:"Weekly Provider Summary",description:"Weekly summary of provider activity and payments",fileId:"file-2",frequency:"weekly",status:"active",time:"01:00",timezone:"America/New_York",weekDays:["monday"],lastRun:p(7),nextRun:H(3),createdAt:p(90),updatedAt:p(7),retryConfig:{maxAttempts:2,delayMinutes:30},notifyOnSuccess:!1,notifyOnFailure:!0,notificationEmails:["providers@company.com"]},{id:"schedule-3",name:"Monthly Financial Report",description:"Monthly financial reconciliation report",fileId:"file-3",frequency:"monthly",status:"active",time:"04:00",timezone:"UTC",monthDays:[1],lastRun:p(15),nextRun:H(15),createdAt:p(180),updatedAt:p(15),notifyOnSuccess:!0,notifyOnFailure:!0,notificationEmails:["finance@company.com"]},{id:"schedule-4",name:"Weekly Compliance Export",description:"Weekly export of compliance data",fileId:"file-4",frequency:"weekly",status:"suspended",time:"22:00",timezone:"America/Chicago",weekDays:["sunday"],lastRun:p(10),nextRun:"",createdAt:p(45),updatedAt:p(2),notifyOnSuccess:!0,notifyOnFailure:!0,notificationEmails:["compliance@company.com"]},{id:"schedule-5",name:"Daily Member Updates",description:"Daily member eligibility and demographic updates",fileId:"file-5",frequency:"daily",status:"pending",time:"20:00",timezone:"America/Los_Angeles",createdAt:p(1),updatedAt:p(1),retryConfig:{maxAttempts:3,delayMinutes:10},notifyOnSuccess:!1,notifyOnFailure:!0,notificationEmails:["membership@company.com"]},{id:"schedule-6",name:"Bi-weekly Payroll Export",description:"Bi-weekly export of payroll data",fileId:"file-6",frequency:"weekly",status:"active",time:"18:00",timezone:"America/New_York",weekDays:["friday"],lastRun:p(7),nextRun:H(7),createdAt:p(120),updatedAt:p(7),notifyOnSuccess:!0,notifyOnFailure:!0,notificationEmails:["payroll@company.com","hr@company.com"]},{id:"schedule-7",name:"Monthly Audit Log",description:"Monthly export of system audit logs",fileId:"file-7",frequency:"monthly",status:"active",time:"02:00",timezone:"UTC",monthDays:[1],lastRun:p(30),nextRun:H(1),createdAt:p(365),updatedAt:p(30),retryConfig:{maxAttempts:5,delayMinutes:20},notifyOnSuccess:!0,notifyOnFailure:!0,notificationEmails:["security@company.com","compliance@company.com"]}],nt=[{id:"file-1",name:"Claims Data Extract"},{id:"file-2",name:"Provider Summary Report"},{id:"file-3",name:"Financial Reconciliation"},{id:"file-4",name:"Compliance Report"},{id:"file-5",name:"Member Updates File"},{id:"file-6",name:"Payroll Data Export"},{id:"file-7",name:"System Audit Logs"}],st=[{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"UTC",label:"UTC"}],rt=[{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"}],ot=Array.from({length:31},(s,r)=>({value:r+1,label:`${r+1}${lt(r+1)}`}));function lt(s){if(s>=11&&s<=13)return"th";switch(s%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function at({schedules:s}){const r=s.filter(t=>t.status==="active"),o=r.filter(t=>{const n=new Date(t.nextRun||""),c=new Date;return n.toDateString()===c.toDateString()});return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(A,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(O,{className:"text-sm font-medium",children:"Total Schedules"})}),e.jsx(P,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.length})})]}),e.jsxs(A,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(O,{className:"text-sm font-medium",children:"Active Schedules"})}),e.jsx(P,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.length})})]}),e.jsxs(A,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(O,{className:"text-sm font-medium",children:"Running Today"})}),e.jsx(P,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.length})})]})]})}var[$,zt]=Ce("Tooltip",[ie]),W=ie(),ue="TooltipProvider",ct=700,Q="tooltip.open",[it,ee]=$(ue),me=s=>{const{__scopeTooltip:r,delayDuration:o=ct,skipDelayDuration:t=300,disableHoverableContent:n=!1,children:c}=s,[u,f]=i.useState(!0),d=i.useRef(!1),h=i.useRef(0);return i.useEffect(()=>{const m=h.current;return()=>window.clearTimeout(m)},[]),e.jsx(it,{scope:r,isOpenDelayed:u,delayDuration:o,onOpen:i.useCallback(()=>{window.clearTimeout(h.current),f(!1)},[]),onClose:i.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>f(!0),t)},[t]),isPointerInTransitRef:d,onPointerInTransitChange:i.useCallback(m=>{d.current=m},[]),disableHoverableContent:n,children:c})};me.displayName=ue;var G="Tooltip",[dt,B]=$(G),xe=s=>{const{__scopeTooltip:r,children:o,open:t,defaultOpen:n=!1,onOpenChange:c,disableHoverableContent:u,delayDuration:f}=s,d=ee(G,s.__scopeTooltip),h=W(r),[m,l]=i.useState(null),a=De(),x=i.useRef(0),j=u??d.disableHoverableContent,g=f??d.delayDuration,v=i.useRef(!1),[k=!1,S]=Ee({prop:t,defaultProp:n,onChange:se=>{se?(d.onOpen(),document.dispatchEvent(new CustomEvent(Q))):d.onClose(),c==null||c(se)}}),_=i.useMemo(()=>k?v.current?"delayed-open":"instant-open":"closed",[k]),L=i.useCallback(()=>{window.clearTimeout(x.current),v.current=!1,S(!0)},[S]),q=i.useCallback(()=>{window.clearTimeout(x.current),S(!1)},[S]),ne=i.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{v.current=!0,S(!0)},g)},[g,S]);return i.useEffect(()=>()=>window.clearTimeout(x.current),[]),e.jsx(_e,{...h,children:e.jsx(dt,{scope:r,contentId:a,open:k,stateAttribute:_,trigger:m,onTriggerChange:l,onTriggerEnter:i.useCallback(()=>{d.isOpenDelayed?ne():L()},[d.isOpenDelayed,ne,L]),onTriggerLeave:i.useCallback(()=>{j?q():window.clearTimeout(x.current)},[q,j]),onOpen:L,onClose:q,disableHoverableContent:j,children:o})})};xe.displayName=G;var Z="TooltipTrigger",he=i.forwardRef((s,r)=>{const{__scopeTooltip:o,...t}=s,n=B(Z,o),c=ee(Z,o),u=W(o),f=i.useRef(null),d=le(r,f,n.onTriggerChange),h=i.useRef(!1),m=i.useRef(!1),l=i.useCallback(()=>h.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",l),[l]),e.jsx(Ie,{asChild:!0,...u,children:e.jsx(we.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...t,ref:d,onPointerMove:I(s.onPointerMove,a=>{a.pointerType!=="touch"&&!m.current&&!c.isPointerInTransitRef.current&&(n.onTriggerEnter(),m.current=!0)}),onPointerLeave:I(s.onPointerLeave,()=>{n.onTriggerLeave(),m.current=!1}),onPointerDown:I(s.onPointerDown,()=>{h.current=!0,document.addEventListener("pointerup",l,{once:!0})}),onFocus:I(s.onFocus,()=>{h.current||n.onOpen()}),onBlur:I(s.onBlur,n.onClose),onClick:I(s.onClick,n.onClose)})})});he.displayName=Z;var te="TooltipPortal",[ut,mt]=$(te,{forceMount:void 0}),fe=s=>{const{__scopeTooltip:r,forceMount:o,children:t,container:n}=s,c=B(te,r);return e.jsx(ut,{scope:r,forceMount:o,children:e.jsx(ae,{present:o||c.open,children:e.jsx(ke,{asChild:!0,container:n,children:t})})})};fe.displayName=te;var D="TooltipContent",pe=i.forwardRef((s,r)=>{const o=mt(D,s.__scopeTooltip),{forceMount:t=o.forceMount,side:n="top",...c}=s,u=B(D,s.__scopeTooltip);return e.jsx(ae,{present:t||u.open,children:u.disableHoverableContent?e.jsx(ye,{side:n,...c,ref:r}):e.jsx(xt,{side:n,...c,ref:r})})}),xt=i.forwardRef((s,r)=>{const o=B(D,s.__scopeTooltip),t=ee(D,s.__scopeTooltip),n=i.useRef(null),c=le(r,n),[u,f]=i.useState(null),{trigger:d,onClose:h}=o,m=n.current,{onPointerInTransitChange:l}=t,a=i.useCallback(()=>{f(null),l(!1)},[l]),x=i.useCallback((j,g)=>{const v=j.currentTarget,k={x:j.clientX,y:j.clientY},S=yt(k,v.getBoundingClientRect()),_=jt(k,S),L=gt(g.getBoundingClientRect()),q=bt([..._,...L]);f(q),l(!0)},[l]);return i.useEffect(()=>()=>a(),[a]),i.useEffect(()=>{if(d&&m){const j=v=>x(v,m),g=v=>x(v,d);return d.addEventListener("pointerleave",j),m.addEventListener("pointerleave",g),()=>{d.removeEventListener("pointerleave",j),m.removeEventListener("pointerleave",g)}}},[d,m,x,a]),i.useEffect(()=>{if(u){const j=g=>{const v=g.target,k={x:g.clientX,y:g.clientY},S=(d==null?void 0:d.contains(v))||(m==null?void 0:m.contains(v)),_=!vt(k,u);S?a():_&&(a(),h())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[d,m,u,h,a]),e.jsx(ye,{...s,ref:c})}),[ht,ft]=$(G,{isInside:!1}),ye=i.forwardRef((s,r)=>{const{__scopeTooltip:o,children:t,"aria-label":n,onEscapeKeyDown:c,onPointerDownOutside:u,...f}=s,d=B(D,o),h=W(o),{onClose:m}=d;return i.useEffect(()=>(document.addEventListener(Q,m),()=>document.removeEventListener(Q,m)),[m]),i.useEffect(()=>{if(d.trigger){const l=a=>{const x=a.target;x!=null&&x.contains(d.trigger)&&m()};return window.addEventListener("scroll",l,{capture:!0}),()=>window.removeEventListener("scroll",l,{capture:!0})}},[d.trigger,m]),e.jsx(Te,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:l=>l.preventDefault(),onDismiss:m,children:e.jsxs(Fe,{"data-state":d.stateAttribute,...h,...f,ref:r,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Se,{children:t}),e.jsx(ht,{scope:o,isInside:!0,children:e.jsx(Ne,{id:d.contentId,role:"tooltip",children:n||t})})]})})});pe.displayName=D;var je="TooltipArrow",pt=i.forwardRef((s,r)=>{const{__scopeTooltip:o,...t}=s,n=W(o);return ft(je,o).isInside?null:e.jsx(Me,{...n,...t,ref:r})});pt.displayName=je;function yt(s,r){const o=Math.abs(r.top-s.y),t=Math.abs(r.bottom-s.y),n=Math.abs(r.right-s.x),c=Math.abs(r.left-s.x);switch(Math.min(o,t,n,c)){case c:return"left";case n:return"right";case o:return"top";case t:return"bottom";default:throw new Error("unreachable")}}function jt(s,r,o=5){const t=[];switch(r){case"top":t.push({x:s.x-o,y:s.y+o},{x:s.x+o,y:s.y+o});break;case"bottom":t.push({x:s.x-o,y:s.y-o},{x:s.x+o,y:s.y-o});break;case"left":t.push({x:s.x+o,y:s.y-o},{x:s.x+o,y:s.y+o});break;case"right":t.push({x:s.x-o,y:s.y-o},{x:s.x-o,y:s.y+o});break}return t}function gt(s){const{top:r,right:o,bottom:t,left:n}=s;return[{x:n,y:r},{x:o,y:r},{x:o,y:t},{x:n,y:t}]}function vt(s,r){const{x:o,y:t}=s;let n=!1;for(let c=0,u=r.length-1;c<r.length;u=c++){const f=r[c].x,d=r[c].y,h=r[u].x,m=r[u].y;d>t!=m>t&&o<(h-f)*(t-d)/(m-d)+f&&(n=!n)}return n}function bt(s){const r=s.slice();return r.sort((o,t)=>o.x<t.x?-1:o.x>t.x?1:o.y<t.y?-1:o.y>t.y?1:0),Ct(r)}function Ct(s){if(s.length<=1)return s.slice();const r=[];for(let t=0;t<s.length;t++){const n=s[t];for(;r.length>=2;){const c=r[r.length-1],u=r[r.length-2];if((c.x-u.x)*(n.y-u.y)>=(c.y-u.y)*(n.x-u.x))r.pop();else break}r.push(n)}r.pop();const o=[];for(let t=s.length-1;t>=0;t--){const n=s[t];for(;o.length>=2;){const c=o[o.length-1],u=o[o.length-2];if((c.x-u.x)*(n.y-u.y)>=(c.y-u.y)*(n.x-u.x))o.pop();else break}o.push(n)}return o.pop(),r.length===1&&o.length===1&&r[0].x===o[0].x&&r[0].y===o[0].y?r:r.concat(o)}var wt=me,Tt=xe,St=he,Nt=fe,ge=pe;const Et=wt,kt=Tt,At=St,ve=i.forwardRef(({className:s,sideOffset:r=4,...o},t)=>e.jsx(Nt,{children:e.jsx(ge,{ref:t,sideOffset:r,className:ce("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})}));ve.displayName=ge.displayName;function Rt({schedules:s,onEdit:r,onDelete:o}){const t=n=>{if(!n)return"-";const c=new Date(n);return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(c)};return e.jsxs(A,{children:[e.jsx(R,{children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsx(O,{children:"Schedule Configurations"})})}),e.jsx(P,{children:e.jsxs(Le,{children:[e.jsx(qe,{children:e.jsxs(re,{children:[e.jsx(F,{children:"Name"}),e.jsx(F,{children:"Frequency"}),e.jsx(F,{children:"Next Run"}),e.jsx(F,{children:"Last Run"}),e.jsx(F,{children:"Status"}),e.jsx(F,{children:"Actions"})]})}),e.jsx(ze,{children:s.map(n=>e.jsxs(re,{children:[e.jsx(M,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4 text-muted-foreground"}),n.name]})}),e.jsx(M,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"capitalize",children:n.frequency}),e.jsxs("span",{className:"text-muted-foreground",children:["at ",n.time]})]})}),e.jsx(M,{children:t(n.nextRun)}),e.jsx(M,{children:t(n.lastRun)}),e.jsx(M,{children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium
                    ${n.status==="active"?"bg-green-100 text-green-800":n.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})}),e.jsx(M,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.notifyOnFailure&&e.jsx(Et,{children:e.jsxs(kt,{children:[e.jsx(At,{children:e.jsx(et,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(ve,{children:e.jsx("p",{children:"Failure notifications enabled"})})]})}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>r(n),children:e.jsx(Ve,{className:"h-4 w-4"})}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>o(n),children:e.jsx(He,{className:"h-4 w-4"})})]})})]},n.id))})]})})]})}const Ot=Re("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pt({className:s,variant:r,...o}){return e.jsx("div",{className:ce(Ot({variant:r}),s),...o})}const It=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],Ft=y.object({name:y.string().min(2,"Name must be at least 2 characters"),description:y.string().min(10,"Description must be at least 10 characters"),fileId:y.string().min(1,"File selection is required"),frequency:y.enum(["daily","weekly","monthly"]),time:y.string().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,"Invalid time format"),timezone:y.string().min(1,"Timezone is required"),weekDays:y.array(y.enum(It)).optional(),monthDays:y.array(y.number()).optional(),retryConfig:y.object({maxAttempts:y.number().min(1).max(10),delayMinutes:y.number().min(1).max(60)}).optional(),notifyOnSuccess:y.boolean(),notifyOnFailure:y.boolean(),notificationEmails:y.array(y.string().email())}).refine(s=>!(s.frequency==="weekly"&&(!s.weekDays||s.weekDays.length===0)||s.frequency==="monthly"&&(!s.monthDays||s.monthDays.length===0)),{message:"Please select days for the schedule to run",path:["weekDays"]});function Mt({open:s,onOpenChange:r,onSubmit:o,initialData:t}){const n=Be({resolver:$e(Ft),defaultValues:{name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",fileId:(t==null?void 0:t.fileId)||"",frequency:(t==null?void 0:t.frequency)||"daily",time:(t==null?void 0:t.time)||"00:00",timezone:(t==null?void 0:t.timezone)||"UTC",weekDays:(t==null?void 0:t.weekDays)||[],monthDays:(t==null?void 0:t.monthDays)||[],retryConfig:(t==null?void 0:t.retryConfig)||{maxAttempts:3,delayMinutes:15},notifyOnSuccess:(t==null?void 0:t.notifyOnSuccess)||!1,notifyOnFailure:(t==null?void 0:t.notifyOnFailure)||!0,notificationEmails:(t==null?void 0:t.notificationEmails)||[]}}),[c,u]=U.useState("");U.useEffect(()=>{var l,a;s&&(t?n.reset({name:t.name,description:t.description,fileId:t.fileId,frequency:t.frequency,time:t.time,timezone:t.timezone,weekDays:t.weekDays||[],monthDays:t.monthDays||[],retryConfig:{maxAttempts:((l=t.retryConfig)==null?void 0:l.maxAttempts)||3,delayMinutes:((a=t.retryConfig)==null?void 0:a.delayMinutes)||15},notifyOnSuccess:t.notifyOnSuccess||!1,notifyOnFailure:t.notifyOnFailure||!0,notificationEmails:t.notificationEmails||[]}):n.reset({name:"",description:"",fileId:"",frequency:"daily",time:"00:00",timezone:"UTC",weekDays:[],monthDays:[],retryConfig:{maxAttempts:3,delayMinutes:15},notifyOnSuccess:!1,notifyOnFailure:!0,notificationEmails:[]}))},[s,t,n.reset]);const f=()=>{if(c&&c.includes("@")){const l=n.getValues("notificationEmails");n.setValue("notificationEmails",[...l,c]),u("")}},d=l=>{const a=n.getValues("notificationEmails");n.setValue("notificationEmails",a.filter(x=>x!==l))},h=l=>{const a=n.getValues("weekDays")||[],x=a.includes(l)?a.filter(j=>j!==l):[...a,l];n.setValue("weekDays",x)},m=l=>{const a={...l,weekDays:l.weekDays};o(a),r(!1)};return e.jsx(We,{open:s,onOpenChange:r,children:e.jsxs(Ge,{className:"max-w-2xl p-0",children:[e.jsxs(Ye,{className:"px-6 py-4 border-b",children:[e.jsx(Xe,{children:t?"Edit Schedule":"Create New Schedule"}),e.jsx(Ke,{children:"Configure when and how your file should be processed."})]}),e.jsx("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:e.jsx(Je,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(m),className:"space-y-6",children:[e.jsxs(A,{children:[e.jsx(R,{children:e.jsx(O,{className:"text-base",children:"Basic Information"})}),e.jsxs(P,{className:"space-y-4",children:[e.jsx(b,{control:n.control,name:"name",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Schedule Name"}),e.jsx(N,{children:e.jsx(z,{...l,placeholder:"Enter schedule name"})}),e.jsx(T,{})]})}),e.jsx(b,{control:n.control,name:"description",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Description"}),e.jsx(N,{children:e.jsx(Qe,{...l,placeholder:"Describe the purpose of this schedule"})}),e.jsx(T,{})]})}),e.jsx(b,{control:n.control,name:"fileId",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Select File"}),e.jsxs(Y,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(N,{children:e.jsx(X,{children:e.jsx(K,{placeholder:"Select a file to schedule"})})}),e.jsx(J,{children:nt.map(a=>e.jsx(V,{value:a.id,children:a.name},a.id))})]}),e.jsx(T,{})]})})]})]}),e.jsxs(A,{children:[e.jsx(R,{children:e.jsx(O,{className:"text-base",children:"Schedule Configuration"})}),e.jsxs(P,{className:"space-y-4",children:[e.jsx(b,{control:n.control,name:"frequency",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Frequency"}),e.jsxs(Y,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(N,{children:e.jsx(X,{children:e.jsx(K,{})})}),e.jsxs(J,{children:[e.jsx(V,{value:"daily",children:"Daily"}),e.jsx(V,{value:"weekly",children:"Weekly"}),e.jsx(V,{value:"monthly",children:"Monthly"})]})]}),e.jsx(T,{})]})}),n.watch("frequency")==="weekly"&&e.jsx(b,{control:n.control,name:"weekDays",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Select Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:rt.map(a=>{var x;return e.jsx(E,{type:"button",variant:(x=l.value)!=null&&x.includes(a.value)?"default":"outline",size:"sm",onClick:()=>h(a.value),children:a.label},a.value)})}),e.jsx(T,{})]})}),n.watch("frequency")==="monthly"&&e.jsx(b,{control:n.control,name:"monthDays",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Select Days of Month"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ot.map(a=>{var x;return e.jsx(E,{type:"button",variant:(x=l.value)!=null&&x.includes(a.value)?"default":"outline",size:"sm",onClick:()=>{var g;const j=(g=l.value)!=null&&g.includes(a.value)?l.value.filter(v=>v!==a.value):[...l.value||[],a.value];n.setValue("monthDays",j)},children:a.label},a.value)})}),e.jsx(T,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{control:n.control,name:"time",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Time"}),e.jsx(N,{children:e.jsx(z,{type:"time",...l})}),e.jsx(T,{})]})}),e.jsx(b,{control:n.control,name:"timezone",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Timezone"}),e.jsxs(Y,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(N,{children:e.jsx(X,{children:e.jsx(K,{})})}),e.jsx(J,{children:st.map(a=>e.jsx(V,{value:a.value,children:a.label},a.value))})]}),e.jsx(T,{})]})})]})]})]}),e.jsxs(A,{children:[e.jsx(R,{children:e.jsx(O,{className:"text-base",children:"Retry Configuration"})}),e.jsx(P,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{control:n.control,name:"retryConfig.maxAttempts",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Max Retry Attempts"}),e.jsx(N,{children:e.jsx(z,{type:"number",...l,min:1,max:10})}),e.jsx(T,{})]})}),e.jsx(b,{control:n.control,name:"retryConfig.delayMinutes",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Delay Between Retries (minutes)"}),e.jsx(N,{children:e.jsx(z,{type:"number",...l,min:1,max:60})}),e.jsx(T,{})]})})]})})]}),e.jsxs(A,{children:[e.jsx(R,{children:e.jsx(O,{className:"text-base",children:"Notifications"})}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(b,{control:n.control,name:"notifyOnSuccess",render:({field:l})=>e.jsxs(C,{className:"flex items-center space-x-2",children:[e.jsx(N,{children:e.jsx(oe,{checked:l.value,onCheckedChange:l.onChange})}),e.jsx(w,{children:"Notify on Success"})]})}),e.jsx(b,{control:n.control,name:"notifyOnFailure",render:({field:l})=>e.jsxs(C,{className:"flex items-center space-x-2",children:[e.jsx(N,{children:e.jsx(oe,{checked:l.value,onCheckedChange:l.onChange})}),e.jsx(w,{children:"Notify on Failure"})]})})]}),e.jsx(b,{control:n.control,name:"notificationEmails",render:({field:l})=>e.jsxs(C,{children:[e.jsx(w,{children:"Notification Recipients"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{type:"email",placeholder:"Enter email address",value:c,onChange:a=>u(a.target.value),onKeyDown:a=>{a.key==="Enter"&&(a.preventDefault(),f())}}),e.jsx(E,{type:"button",variant:"outline",onClick:f,children:e.jsx(de,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.value.map(a=>e.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-1",children:[a,e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>d(a),children:e.jsx(Oe,{className:"h-3 w-3"})})]},a))}),e.jsx(T,{})]})]})})]})]})]})})}),e.jsxs(Ze,{className:"px-6 py-4 border-t",children:[e.jsx(E,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(E,{type:"button",onClick:n.handleSubmit(m),disabled:!n.formState.isValid,children:t?"Update Schedule":"Create Schedule"})]})]})})}function Vt(){const[s,r]=U.useState(tt),[o,t]=U.useState(!1),[n,c]=U.useState(null),{toast:u}=Pe(),f=l=>{if(n)r(a=>a.map(x=>x.id===n.id?{...x,...l,updatedAt:new Date().toISOString()}:x)),u({title:"Schedule Updated",description:"Schedule has been updated successfully."});else{const a={...l,id:`schedule-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:"pending"};r(x=>[...x,a]),u({title:"Schedule Created",description:"New schedule has been created successfully."})}m()},d=l=>{console.log("Editing schedule:",l),c(l),t(!0)},h=l=>{r(a=>a.filter(x=>x.id!==l.id)),u({title:"Schedule Deleted",description:"Schedule has been deleted successfully.",variant:"destructive"})},m=()=>{t(!1),c(null)};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Schedule Manager"}),e.jsxs(E,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[e.jsx(de,{size:16}),"New Schedule"]})]}),e.jsx(at,{schedules:s}),e.jsx(Rt,{schedules:s,onEdit:d,onDelete:h}),e.jsx(Mt,{open:o,onOpenChange:l=>{l?t(!0):m()},onSubmit:f,initialData:n})]})}export{Mt as ScheduleFormDialog,Rt as ScheduleList,Vt as ScheduleManager,at as ScheduleStats};
